import { vg } from '$lib/transform.js';
import { describe, expect, it } from 'vitest';

describe('transform', () => {
	describe('vg', () => {
		it('works', () => {
			expect(
				vg({
					date: '2022-10-06',
					updated: '2022-10-05T13:29:10.000Z',
					average: { se1: 4.65, se2: 4.65, se3: 4.65, se4: 4.65 },
					timeseries: {
						columns: ['date', 'hours', 'se1', 'se2', 'se3', 'se4'],
						rows: [
							['2022-10-06', '00-01', -0.42, -0.42, -0.42, -0.42],
							['2022-10-06', '01-02', -1.03, -1.03, -1.03, -1.03],
							['2022-10-06', '02-03', -1.07, -1.07, -1.07, -1.07],
							['2022-10-06', '03-04', -0.56, -0.56, -0.56, -0.56],
							['2022-10-06', '04-05', -0.1, -0.1, -0.1, -0.1],
							['2022-10-06', '05-06', 0.63, 0.63, 0.63, 0.63],
							['2022-10-06', '06-07', 4.63, 4.63, 4.63, 4.63],
							['2022-10-06', '07-08', 11.05, 11.05, 11.05, 11.05],
							['2022-10-06', '08-09', 14.21, 14.21, 14.21, 14.21],
							['2022-10-06', '09-10', 14.11, 14.11, 14.11, 14.11],
							['2022-10-06', '10-11', 12.06, 12.06, 12.06, 12.06],
							['2022-10-06', '11-12', 9.69, 9.69, 9.69, 9.69],
							['2022-10-06', '12-13', 6.16, 6.16, 6.16, 6.16],
							['2022-10-06', '13-14', 4.76, 4.76, 4.76, 4.76],
							['2022-10-06', '14-15', 4.28, 4.28, 4.28, 4.28],
							['2022-10-06', '15-16', 4.72, 4.72, 4.72, 4.72],
							['2022-10-06', '16-17', 4.51, 4.51, 4.51, 4.51],
							['2022-10-06', '17-18', 7.21, 7.21, 7.21, 7.21],
							['2022-10-06', '18-19', 5.94, 5.94, 5.94, 5.94],
							['2022-10-06', '19-20', 5.51, 5.51, 5.51, 5.51],
							['2022-10-06', '20-21', 3.58, 3.58, 3.58, 3.58],
							['2022-10-06', '21-22', 1.59, 1.59, 1.59, 1.59],
							['2022-10-06', '22-23', 0.1, 0.1, 0.1, 0.1],
							['2022-10-06', '23-00', -0.05, -0.05, -0.05, -0.05]
						]
					}
				})
			).toEqual({
				prices: [
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '00', toHour: '01', value: -0.42 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '01', toHour: '02', value: -1.03 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '02', toHour: '03', value: -1.07 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '03', toHour: '04', value: -0.56 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '04', toHour: '05', value: -0.1 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '05', toHour: '06', value: 0.63 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '06', toHour: '07', value: 4.63 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '07', toHour: '08', value: 11.05 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '08', toHour: '09', value: 14.21 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '09', toHour: '10', value: 14.11 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '10', toHour: '11', value: 12.06 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '11', toHour: '12', value: 9.69 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '12', toHour: '13', value: 6.16 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '13', toHour: '14', value: 4.76 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '14', toHour: '15', value: 4.28 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '15', toHour: '16', value: 4.72 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '16', toHour: '17', value: 4.51 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '17', toHour: '18', value: 7.21 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '18', toHour: '19', value: 5.94 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '19', toHour: '20', value: 5.51 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '20', toHour: '21', value: 3.58 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '21', toHour: '22', value: 1.59 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '22', toHour: '23', value: 0.1 },
					{ color: 'hsl(150deg 100% 65%)', day: '2022-10-06', fromHour: '23', toHour: '24', value: -0.05 }
				]
			});
		});
	});
});
